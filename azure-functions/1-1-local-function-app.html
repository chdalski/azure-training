<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Local Function App - Azure Trainings</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../src/css/custom.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Trainings</li><li class="chapter-item expanded "><a href="../azure-functions/index.html"><strong aria-hidden="true">1.</strong> Azure Functions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../azure-functions/1-1-local-function-app.html" class="active"><strong aria-hidden="true">1.1.</strong> Local Function App</a></li><li class="chapter-item expanded "><a href="../azure-functions/1-2-local-function.html"><strong aria-hidden="true">1.2.</strong> Local Function</a></li><li class="chapter-item expanded "><a href="../azure-functions/1-3-azure-function-app.html"><strong aria-hidden="true">1.3.</strong> Azure Function App</a></li><li class="chapter-item expanded "><a href="../azure-functions/1-4-deploying-local-to-azure.html"><strong aria-hidden="true">1.4.</strong> Deploying your App to Azure</a></li><li class="chapter-item expanded "><a href="../azure-functions/1-5-working-with-app-settings.html"><strong aria-hidden="true">1.5.</strong> Working with App Settings</a></li><li class="chapter-item expanded "><a href="../azure-functions/1-6-adding-health-checks.html"><strong aria-hidden="true">1.6.</strong> Adding health checks</a></li><li class="chapter-item expanded "><a href="../azure-functions/1-7-working-with-logs.html"><strong aria-hidden="true">1.7.</strong> Working with Logs</a></li><li class="chapter-item expanded "><a href="../azure-functions/1-8-basic-function-security.html"><strong aria-hidden="true">1.8.</strong> Basic Function Security</a></li><li class="chapter-item expanded "><a href="../azure-functions/1-9-cleanup.html"><strong aria-hidden="true">1.9.</strong> Cleanup</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Azure Trainings</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/chdalski/azure-training/tree/main" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/chdalski/azure-training/edit/main/src/azure-functions/1-1-local-function-app.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="local-function-app"><a class="header" href="#local-function-app">Local Function App</a></h1>
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p>In this chapter we will create a local function app and take a closer look at its files.</p>
<p>Before we create our first <em>Function App</em>, let me point out an important distinction between the terms <em>Azure Functions</em>, <em>Functions</em>, <em>Function App</em> and <em>function</em>:</p>
<p><em>Azure Functions</em>, <em>Functions</em> and <em>Function App</em> are used interchangeably in the documentation and refer to Azure's serverless compute service or more specific its runtime environment, whereas a <em>function</em> or <em>functions</em> (lower case) refer to a block of code executed in the runtime environment.</p>
<h2 id="install-the-azure-function-core-tools"><a class="header" href="#install-the-azure-function-core-tools">Install the Azure Function Core Tools</a></h2>
<p><a href="https://github.com/Azure/azure-functions-core-tools">Azure Functions Core Tools</a> let you develop and test your functions on your local computer from the command prompt or terminal.
Your local functions can connect to live Azure services, and you can debug your functions on your local computer.
You can even deploy a Function App to your Azure subscription.</p>
<p>Install the Azure Function Core Tools via the node package manager (npm):</p>
<pre><code class="language-shell">npm install -g azure-functions-core-tools@4 --unsafe-perm true
</code></pre>
<p>Check if you can execute the <code>func</code> command:</p>
<pre><code class="language-shell">func --version
</code></pre>
<blockquote>
<p>Note: If you can't execute the <code>func</code> command, check the output from the installation command and your <em>PATH</em> environment variable.</p>
</blockquote>
<h2 id="create-a-function-app"><a class="header" href="#create-a-function-app">Create a Function App</a></h2>
<p>To create a new Function App in a directory called <code>function-app-demo</code>, type:</p>
<pre><code class="language-shell">func init function-app-demo --worker-runtime node --language typescript
</code></pre>
<p>Change to the newly created directory and browse the <code>devDependencies</code> section in the package.json file.
If the package <code>@types/node</code> is not installed in version <em>18</em> update it with:</p>
<pre><code class="language-shell">npm install -D @types/node@18
</code></pre>
<blockquote>
<p>Note: We're using the types for <code>@types/node@18</code>, because the version should match with the Node.js version mentioned in <a href="./README.html#prerequisites">prerequisites</a>.</p>
</blockquote>
<h2 id="the-function-apps-files"><a class="header" href="#the-function-apps-files">The Function App's files</a></h2>
<p>Let's take a look at the Function App-specific files in our new app.</p>
<h3 id="the-hostjson"><a class="header" href="#the-hostjson">The <em>host.json</em></a></h3>
<p>The <a href="https://learn.microsoft.com/en-us/azure/azure-functions/functions-host-json">host.json</a> metadata file contains configuration options that affect all functions in a function app instance.</p>
<p>Browsing the file contents, you will notice two different version statements.
The first one (root level) defines the <em>Function Runtime</em> version and the second one defines the <em>Extension Bundle</em> version.</p>
<p><a href="https://learn.microsoft.com/en-us/azure/azure-functions/functions-versions?tabs=v4&amp;pivots=programming-language-typescript">Function Runtime</a>, as the name implies, specifies the runtime version for the function.
The runtime version defined in the host.json can be misleading, though, because it's specified as either version <strong>1</strong> or version <strong>2</strong> where the latter effectively means version <strong>2 and above</strong>.
The actual runtime version is defined by the <em>Azure Functions Core Tools</em> we're using.</p>
<p><a href="https://learn.microsoft.com/en-us/azure/azure-functions/functions-bindings-register#extension-bundles">Extension bundles</a> are a way to add a pre-defined set of compatible binding extensions to your function app.</p>
<h4 id="-task-update-the-extension-bundle-version"><a class="header" href="#-task-update-the-extension-bundle-version"><span class="task">🛠 TASK:</span> Update the extension bundle version</a></h4>
<p>Update the extensionBundle version to version <strong>4</strong>.</p>
<details>
  <summary>💡 HINT</summary>
<p>Check out the <a href="https://learn.microsoft.com/en-us/azure/azure-functions/functions-bindings-register#extension-bundles">documentation</a>.</p>
</details>
<br/>
<details>
  <summary>🎓 SOLUTION</summary>
<p>The extensionBundle definition in the host.json should now look like:</p>
<pre><code class="language-json">  &quot;extensionBundle&quot;: {
    &quot;id&quot;: &quot;Microsoft.Azure.Functions.ExtensionBundle&quot;,
    &quot;version&quot;: &quot;[4.0.0, 5.0.0)&quot;
  }
</code></pre>
</details>
<h3 id="the-localsettingsjson"><a class="header" href="#the-localsettingsjson">The <em>local.settings.json</em></a></h3>
<p>The <em>local.settings.json</em> represents the <a href="https://learn.microsoft.com/en-us/azure/azure-functions/functions-app-settings">App settings</a> for your local environment, which contain configuration options that affect all functions for that function app.
These settings are accessed as environment variables.</p>
<p>As of now the file doesn't contain too many settings.
However, there is a setting for our language worker runtime (<code>FUNCTIONS_WORKER_RUNTIME</code>) which corresponds to the language runtime being used in your application (in our case Node).</p>
<h3 id="the-funcignore"><a class="header" href="#the-funcignore">The <em>.funcignore</em></a></h3>
<p>A function app may contain language-specific files and directories that shouldn't be <a href="https://learn.microsoft.com/en-us/azure/azure-functions/functions-run-local#publish">published</a>.
Excluded items are listed in the <em>.funcignore</em> file in the root directory.</p>
<blockquote>
<p>Note: The file already includes the directories of the dev dependencies in our package.json file and a test directory.
If you add further dependencies, you should make sure they are listed in the <em>.funcignore</em> file.
This is something to keep in mind as it might slow down the publishing of new versions considerably if you upload test frameworks or other unwanted (and possibly large) dependencies to Azure.</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../azure-functions/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../azure-functions/1-2-local-function.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../azure-functions/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../azure-functions/1-2-local-function.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
